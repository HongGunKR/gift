graph TD
    subgraph "ì‚¬ìš©ì ì˜ì—­"
        A["ğŸ‘¤ ì‚¬ìš©ì (ì›¹ ë¸Œë¼ìš°ì €)"]
    end

    subgraph "ë°°í¬ ë° í™˜ê²½ ê´€ë¦¬ (Docker Compose)"
        C(("Docker Compose"))
        D["ğŸ“œ docker-compose.yml"]
        E["ğŸ“œ Dockerfile"]
        F["ğŸ“ .env (OPENAI_API_KEY)"]
    end

    subgraph "ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ (Streamlit App)"
        G["ğŸš€ Streamlit Server<br/>(í¬íŠ¸ 8501)"]
        G1("ë©”ì¸.py<br/>í™ˆ ëŒ€ì‹œë³´ë“œ")
        G2("pages/1_TOP100.py<br/>Top 100")
        G3("pages/2_ê²€ìƒ‰.py<br/>ê²€ìƒ‰ & LangGraph")
        G4("pages/3_AI_ì‹¬ì¸µë¶„ì„.py<br/>ì‹¬ì¸µ ë¶„ì„ RAG")
    end

    subgraph "AI Agent & ë°ì´í„° ë¡œì§"
        H["ğŸ¤– agent.py<br/>(LangGraph & RAG Logic)"]
        I["ğŸ“œ data_fetcher.py<br/>(ì™¸ë¶€ ë°ì´í„° ì—°ë™)"]
    end

    subgraph "ì™¸ë¶€ ë°ì´í„° ì†ŒìŠ¤ ë° ì €ì¥ì†Œ"
        J[("pykrx API<br/>ì£¼ì‹ ë°ì´í„°")]
        K[("DuckDuckGo Search API<br/>ë‰´ìŠ¤ ê²€ìƒ‰")]
        L[("OpenAI API<br/>LLM ì„œë¹„ìŠ¤")]
        M["/ğŸ“‚ reports/<br/>(PDF ë¬¸ì„œ ì €ì¥ì†Œ)/"]
    end

    subgraph "ë‹¤ì´ì–´ê·¸ë¨ ìƒì„± (ë¡œì»¬ ìœ í‹¸ë¦¬í‹°)"
        N["ğŸ“œ visualize_graph.py"]
        O["/ğŸ–¼ï¸ langgraph_flowchart.png/"]
    end


    %% íë¦„ ì •ì˜
    A -- "HTTP ìš”ì²­" --> G

    %% Docker Build/Run íë¦„
    A -- "'docker-compose up --build' ì‹¤í–‰" --> C
    C -- "Dockerfile, .env, í”„ë¡œì íŠ¸ ì†ŒìŠ¤ ì°¸ì¡°" --> E
    E -- "ì‹œìŠ¤í…œ ì˜ì¡´ì„± (Graphviz) ì„¤ì¹˜" --> B{"Docker Hub<br/>(Base Image)"}
    E -- "Python íŒ¨í‚¤ì§€ ì„¤ì¹˜" --> C
    C -- "'modu-gift' ì´ë¯¸ì§€ ë¹Œë“œ" --> G
    C -- "í™˜ê²½ ë³€ìˆ˜ ì „ë‹¬" --> F
    C -- "í¬íŠ¸ ë§¤í•‘ (8501)" --> A
    C -- "ë³¼ë¥¨ ë§ˆìš´íŠ¸" --> M

    %% Streamlit UI íë¦„
    G -- "í˜ì´ì§€ ì„ íƒ" --> G1
    G -- "í˜ì´ì§€ ì„ íƒ" --> G2
    G -- "í˜ì´ì§€ ì„ íƒ" --> G3
    G -- "í˜ì´ì§€ ì„ íƒ" --> G4

    %% ë°ì´í„° íë¦„
    G1 -- "ë°ì´í„° ìš”ì²­" --> I
    G2 -- "ë°ì´í„° ìš”ì²­" --> I
    G3 -- "ë°ì´í„° ìš”ì²­" --> I
    I -- "ì£¼ì‹ ë°ì´í„° ìš”ì²­" --> J
    I -- "ë‰´ìŠ¤ ê²€ìƒ‰ ìš”ì²­" --> K

    %% AI Agent íë¦„
    G3 -- "ì¢…ëª© ë¶„ì„ ìš”ì²­" --> H
    G4 -- "PDF ë¬¸ì„œ ë¶„ì„ ìš”ì²­" --> H
    H -- "ë°ì´í„° ìš”ì²­ (íˆ´ ì‚¬ìš©)" --> I
    H -- "PDF ë¡œë“œ" --> M
    H -- "LLM í˜¸ì¶œ" --> L

    %% ë‹¤ì´ì–´ê·¸ë¨ ìƒì„± íë¦„
    A -- "'python diagram/visualize_graph.py' ì‹¤í–‰" --> N
    N -- "agent.py êµ¬ì¡° ë¶„ì„" --> H
    N -- "ë‹¤ì´ì–´ê·¸ë¨ ë¡œì»¬ ë Œë”ë§ (Pyppeteer)" --> O